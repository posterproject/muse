document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("startButton"),o=document.getElementById("stopButton"),l=document.getElementById("localAddress"),d=document.getElementById("localPort"),p=document.getElementById("updateRate"),i=document.getElementById("messageDisplay"),u=document.getElementById("statusIcon"),m=document.getElementById("statusText");let n;function e(t){u.className=t?"running":"stopped",m.textContent=t?"Running":"Stopped",s.disabled=t,o.disabled=!t}function a(t){i.textContent=t}s.addEventListener("click",async()=>{const t={localAddress:l.value,localPort:parseInt(d.value),updateRate:parseFloat(p.value)};try{(await fetch("/api/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok?(e(!0),n=setInterval(async()=>{const c=await fetch("/api/messages");if(c.ok){const y=await c.text();a(y)}},1e3/t.updateRate)):console.error("Failed to start OSC listener")}catch(r){console.error("Error starting OSC listener:",r)}}),o.addEventListener("click",async()=>{try{(await fetch("/api/stop",{method:"POST"})).ok?(e(!1),clearInterval(n),a("Stopped")):console.error("Failed to stop OSC listener")}catch(t){console.error("Error stopping OSC listener:",t)}}),e(!1)});
